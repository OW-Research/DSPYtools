how to optimize and remove duplicate info from code